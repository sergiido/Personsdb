doctype
html
  head
    title Maintenance
    link(rel="stylesheet", href="/css/bootstrap.min.css")
    link(rel="stylesheet", href="/css/styleApp.css")
    link(rel="stylesheet", href="/css/fontlogin.css")
    script(type="text/javascript", src="/js/jquery-3.1.1.js")
    script(type="text/javascript", src="/js/bootstrap.min.js")
    script(type="text/javascript", src="/js/notify.js")
    script(type="text/javascript", src="/js/app.js")

    meta(charset="UTF-8")
    meta(name="viewport", content="width=device-width, initial-scale=1.0")
  body
    #appWrapper
      #infoArea
        h2.form-signin-heading.customfont
          span(class="logo" style="color:#38610B") &#xf1c0;
          span Persons db
        p(style="color:white;") Logged user: #{userDetails.name} as #{userDetails.role}
      #popupWrapper.modal
        .modalContent
          span.close &times;
          .form-app
            h3.form-signin-heading.customfont &#xf2bb; Add person
            form(name="addperson" onsubmit="event.preventDefault(); addPerson();")
              div
                input(name="name", type="text", placeholder="name", size="10", required="")
                input(name="secondname", type="text", placeholder="secondname", size="12", required="")
              div
                input(name="age", type="number", min="0" max="100", placeholder="age", style="width: 4em", required="")
                select.customfont(name="gender")
                  option(value="empty" selected)
                  option.customfont.male(value="male") &#xf183;
                  option.customfont.female(value="female") &#xf182;
                select(name="group")
                  option(value="group1" selected) group1
                  option(value="group2") group2
                  option(value="group3") group3
              div
                input(name="login", type="text", placeholder="login", size="10", required="", autofocus="")
                input(name="pwd", type="password", placeholder="pwd", size="10")
                select(name="roles")
                  option(value="viewer" selected) viewer
                  option(value="user") user
                  option(value="admin") admin
              button.btn.btn-primary.customfont(type="submit") &#xf234; Add
      #actionBand
        if userDetails.role== 'admin' || userDetails.role== 'viewer'
          div#addPerson.button
            span.customfont.fontSize2 &#xf234;
            span Add
        div.button
          a(href= '/jsondata' target='_blank' style="color: lightgrey")
            span.customfont.fontSize2 &#xe800;
            span JSON
        div.button
          a(href= '/logout' style="color: #FE2E2E")
            span.customfont.fontSize2 &#xe805;
            span Logout
      #tableWrapper
        table#userTable
          th #
          th name
          th second name
          th age
          th gender
          th group
          if userDetails.role== 'admin'
            th login
            th pwd
          th role
          th created
          th active
          th actions
          - var i=1
          each item in dbdata
            tr(id= item.id)
              td #{i++}
              td
                div(contenteditable)= item.name
              td= item.secondname
              td= item.age
              if item.gender== 'male'
                td.customfont.male &#xf183;
              else if item.gender=='female'
                td.customfont.female &#xf182;
              else
                td(align="center") -
              td= item.group
              if userDetails.role== 'admin'
                td= item.login
                td= item.pwd
              td= item.role
              - var date = new Date(item.created)
              td= date.getDate() +"/"+parseInt(date.getMonth()+1) +"/"+date.getFullYear() +" "+ date.getHours()+":"+date.getMinutes()
              td= item.active
              td
                if userDetails.role== 'admin'
                  button.customfont(onclick="update(this)" item= item.id style="color: orange") &#xe804;
                  a.customfont.size16(href='/delete/#{item.id}?_method=DELETE' style="color: #FE2E2E") &#xe802;
                else
                  span no access
         //p #{item}: #{db[item]}
